import pandas as pd
import numpy as np
import pickle
from sklearn.ensemble import ExtraTreesClassifier
from sklearn.feature_selection import SelectKBest
from sklearn.feature_selection import chi2

##df = pd.read_csv(r'csv\final_training_set.csv', index_col = 0)
##names = list(df.columns.values)
##
##selected_features_ETC = set()
##selected_features_CHI2 = set()
##
##for _ in range(0,10):
##    X = np.array(df.drop(['type'], 1))
##    y = np.array(df['type'])
##    model = ExtraTreesClassifier()
##    model.fit(X, y)
##    feature_scores = sorted(zip(map(lambda x: round(x, 9), model.feature_importances_), names), 
##                 reverse=True)
##    
##    for values in feature_scores[:100]:
##        selected_features_ETC.add(str(values[1]))
##
##    print(len(selected_features_ETC))
##
##
##
##for value in selected_features_ETC:
##    print(value)
##        
##with open(r'saved_items\selected_features_ETC.pickle' , 'wb') as handle:
##    pickle.dump(selected_features_ETC, handle)   
    





selected_ETC = []
selected_Chi2 = []
final_selected_features = set()

with open(r'saved_items\selected_features_ETC.pickle' , 'rb') as handle:
    selected_ETC = pickle.load(handle)

with open(r'saved_items\selected_features_CHI2.pickle' , 'rb') as handle:
    selected_Chi2 = pickle.load(handle)

for feature in selected_ETC:
    final_selected_features.add(feature)

for feature in selected_Chi2:
    final_selected_features.add(feature)

final_selected_features_list = list(final_selected_features)

print(len(final_selected_features_list))

with open(r'saved_items\final_selected_feature.pickle' , 'wb') as handle:
    pickle.dump(final_selected_features_list, handle)





    
